<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>원 페이지 자동 스크롤 레이아웃</title>

    <style>
        html,
        body,
        h1,
        h2,
        h3,
        h4 {
            margin: 0;
            padding: 0;
        }

        html {
            /* 부드러운 스크롤 애니메이션 설정 */
            scroll-behavior: smooth;
        }

        /* 자동스크롤 위해 스크롤바 없애기 */
        html,
        body {
            overflow: hidden;
        }

        /* 공통 레이아웃 클래스 */
        /* 속박스 */
        .inbox {
            max-width: 2000px;
            margin: 0 auto;
            outline: 2px dashed red;
        }

        /* 배경공통 클래스 */
        .bg-com {
            background-repeat: no-repeat;
            background-position: center;
            background-size: cover;

        }

        /* 각 페이지 클래스 */
        .pg1 {
            background-image: url(./images/auto_scroll/pic1.png);

        }

        .pg2 {
            background-image: url(./images/auto_scroll/pic2.png);

        }

        .pg3 {
            background-image: url(./images/auto_scroll/pic3.png);

        }

        .pg4 {
            background-image: url(./images/auto_scroll/pic4.png);

        }

        .pg5 {
            background-image: url(./images/auto_scroll/pic5.png);

        }

        .pg6 {
            background-image: url(./images/auto_scroll/pic6.png);

        }

        .pg7 {
            background-image: url(./images/auto_scroll/pic7.png);

        }

        /* 페이지 속박스 */
        .page .inbox {
            position: relative;
            height: 100vh;
            /* background-image: linear-gradient(to bottom, lightpink, lightgreen); */
        }

        /* 상단영역 고정하기 */
        #header {
            position: fixed;
            width: 100%;
            height: 200px;
            background-color: rgba(173, 216, 230, 0.425);
            /* 가장위 설정 */
            z-index: 999;
        }
    </style>
    <script>
        let pg_num = 0;
        let sts_wheel = 0;
        let pg_total;
        let ele_pg;
        window.addEventListener('load', loadFn);
        window.addEventListener('wheel', wheelFn);

        setTimeout(() => { window.scrollTo(0, 0) }, 500);

        function loadFn(){

            ele_pg = document.querySelectorAll('.page');
            pg_total = ele_pg.length;
        }

        function wheelFn(e) {
            console.log(pg_num);
            if (sts_wheel) return;
            sts_wheel = 1;
            setTimeout(() => { sts_wheel = 0 }, 800);

            let delta = e.wheelDelta;
            console.log('휠델타', delta);

            if (delta < 0) pg_num++;
            else pg_num--;

            if (pg_num < 0) pg_num = 0;
            if (pg_num == pg_total) pg_num = pg_total - 1;

            window.scrollTo(0, window.innerHeight * pg_num);
        }

        window.addEventListener('touchstart', touchStart);
        window.addEventListener('touchend', touchEnd);

        let pos_start=0, pos_end=0;
        function touchStart(e){
            pos_start = e.touches[0].screenY;
            console.log('터치시작 :', pos_start);
        }
        function touchEnd(e){
            pos_end = e.changedTouches[0].screenY;
            console.log('터치 끝 :', pos_end);

            let result = pos_start - pos_end;

            if(result == 0)return;
            movePage(result>0? 1:0);
        }

        function movePage(dir){
            if(dir) pg_num++;
            else pg_num--;

            if(pg_num<0) pg_num=0;
            if(pg_num == pg_total) pg_num = pg_total-1;

            window.scrollTo(0, ele_pg[pg_num].offsetTop);
        }

    </script>
</head>

<body>
    <!-- 1. 상단영역 : 고정메뉴 -->
    <div id="header">
        <header class="inbox">
        </header>
    </div>
    <!-- 2. 페이지영역 -->
    <div id="content">
        <main>
            <!-- 2-1. 페이지 -->
            <section class="page">
                <div class="inbox bg-com pg1">

                </div>
            </section>

            <!-- 2-2. 페이지 -->
            <section class="page">
                <div class="inbox bg-com pg2">

                </div>
            </section>

            <!-- 2-3. 페이지 -->
            <section class="page">
                <div class="inbox bg-com pg3">

                </div>
            </section>

            <!-- 2-4. 페이지 -->
            <section class="page">
                <div class="inbox bg-com pg4">

                </div>
            </section>

            <!-- 2-5. 페이지 -->
            <section class="page">
                <div class="inbox bg-com pg5">

                </div>
            </section>

            <!-- 2-6. 페이지 -->
            <section class="page">
                <div class="inbox bg-com pg6">

                </div>
            </section>
            <!-- 2-6. 페이지 -->
            <section class="page">
                <div class="inbox bg-com pg7">

                </div>
            </section>
        </main>
    </div>
    <!-- 하단영역 -->
    <div id="footer">
        <footer class="inbox">

        </footer>
    </div>
</body>

</html>